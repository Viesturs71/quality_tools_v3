<!DOCTYPE html>
<html lang="en" class="font-serif">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>User Navigation</title>
    {% load static i18n %}
</head>
<body>

<!-- User Section Navigation -->
<div class="app-user-section module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="user-section" title="{% trans 'User Information' %}">
        {% trans "USER INFORMATION" %}
      </a>
    </caption>
    <tbody id="user-section" class="section-content">
      <tr class="model-profile">
        <th scope="row"><a href="{% url 'accounts:profile' %}">{% trans "My Profile" %}</a></th>
        <td></td>
      </tr>
      <tr class="model-permissions">
        <th scope="row"><a href="{% url 'accounts:permissions' %}">{% trans "My Permissions" %}</a></th>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Documents Register Section -->
<div class="app-quality_docs module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="quality-docs-section" title="{% trans 'Quality documents management' %}">
        {% trans "DOCUMENTS REGISTER" %}
      </a>
    </caption>
    <tbody id="quality-docs-section" class="section-content">
      <!-- Document management -->
      <tr class="model-qualitydocument">
        <th scope="row"><a href="{% url 'quality_docs:document_list' %}">{% trans "All Documents" %}</a></th>
        <td><a href="{% url 'quality_docs:document_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
      <tr class="model-documenttype">
        <th scope="row"><a href="{% url 'quality_docs:my_documents' %}">{% trans "My Documents" %}</a></th>
        <td><a href="{% url 'quality_docs:document_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
      <tr class="model-standard">
        <th scope="row"><a href="{% url 'quality_docs:standard_list' %}">{% trans "Standards" %}</a></th>
        <td></td>
      </tr>
      
      <!-- Approval & workflow items - permission restricted -->
      {% if perms.quality_docs.can_approve_documents %}
      <tr class="model-approvalflow">
        <th scope="row"><a href="{% url 'quality_docs:documents_for_approval' %}">{% trans "Documents for Approval" %}</a></th>
        <td></td>
      </tr>
      <tr class="model-approvalflow">
        <th scope="row"><a href="{% url 'quality_docs:approval_dashboard' %}">{% trans "Approval Dashboard" %}</a></th>
        <td></td>
      </tr>
      {% endif %}
      
      {% if perms.quality_docs.can_manage_approval_flow %}
      <tr class="model-documentsection">
        <th scope="row"><a href="{% url 'quality_docs:submitted_documents_list' %}">{% trans "Submitted Documents" %}</a></th>
        <td></td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>

<!-- Equipment Registry Section -->
<div class="app-equipment module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="equipment-section" title="{% trans 'Equipment Registry' %}">
        {% trans "EQUIPMENT REGISTRY" %}
      </a>
    </caption>
    <tbody id="equipment-section" class="section-content collapsed">
      <tr class="model-equipment">
        <th scope="row"><a href="{% url 'equipment:equipment_list' %}">{% trans "All Equipment" %}</a></th>
        <td><a href="{% url 'equipment:equipment_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
      <tr class="model-category">
        <th scope="row"><a href="{% url 'equipment:category_list' %}">{% trans "Categories" %}</a></th>
        <td><a href="{% url 'equipment:category_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Personnel Section -->
<div class="app-personnel module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="personnel-section" title="{% trans 'Personnel' %}">
        {% trans "PERSONNEL" %}
      </a>
    </caption>
    <tbody id="personnel-section" class="section-content collapsed">
      <tr class="model-staff">
        <th scope="row"><a href="{% url 'personnel:staff_list' %}">{% trans "Staff Records" %}</a></th>
        <td><a href="{% url 'personnel:staff_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
      <tr class="model-qualification">
        <th scope="row"><a href="{% url 'personnel:qualification_list' %}">{% trans "Qualifications" %}</a></th>
        <td><a href="{% url 'personnel:qualification_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Companies Section -->
<div class="app-companies module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="companies-section" title="{% trans 'Companies' %}">
        {% trans "COMPANIES" %}
      </a>
    </caption>
    <tbody id="companies-section" class="section-content collapsed">
      <tr class="model-company">
        <th scope="row"><a href="{% url 'companies:company_list' %}">{% trans "Company Structure" %}</a></th>
        <td><a href="{% url 'companies:company_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
      <tr class="model-department">
        <th scope="row"><a href="{% url 'companies:department_list' %}">{% trans "Departments" %}</a></th>
        <td><a href="{% url 'companies:department_create' %}" class="addlink">{% trans "Add" %}</a></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Administration Section (for admin users) -->
{% if user.is_staff %}
<div class="app-admin module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="admin-section" title="{% trans 'Administration' %}">
        {% trans "ADMINISTRATION" %}
      </a>
    </caption>
    <tbody id="admin-section" class="section-content collapsed">
      <tr class="model-admin">
        <th scope="row"><a href="{% url 'admin:index' %}">{% trans "Admin Dashboard" %}</a></th>
        <td></td>
      </tr>
      <tr class="model-users">
        <th scope="row"><a href="{% url 'admin:auth_user_changelist' %}">{% trans "User Management" %}</a></th>
        <td></td>
      </tr>
      <tr class="model-groups">
        <th scope="row"><a href="{% url 'admin:auth_group_changelist' %}">{% trans "Groups & Permissions" %}</a></th>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>
{% endif %}

<!-- Additional apps from Django admin -->
{% for app in app_list %}
<div class="app-{{ app.app_label }} module">
  <table>
    <caption>
      <a href="javascript:void(0);" class="section toggle-section" data-target="app-{{ app.app_label }}-section" title="{{ app.verbose_name }}">
        {{ app.verbose_name|upper }}
      </a>
    </caption>
    <tbody id="app-{{ app.app_label }}-section" class="section-content collapsed">
    {% for model in app.models %}
      <tr class="model-{{ model.object_name|lower }}">
        <th scope="row"><a href="{{ model.url }}">{{ model.verbose_name_plural }}</a></th>
        <td>{% if model.add_url %}<a href="{{ model.add_url }}" class="addlink">{% trans "Add" %}</a>{% endif %}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endfor %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set Quality Documents section to be open by default
    const documentsSection = document.getElementById('quality-docs-section');
    if (documentsSection) {
        documentsSection.classList.remove('collapsed');
    }
    
    // Toggle sections when clicking on headers
    var toggleButtons = document.querySelectorAll('.toggle-section');
    toggleButtons.forEach(function(button) {
        button.addEventListener('click', function() {
            var targetId = this.getAttribute('data-target');
            var targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.toggle('collapsed');
                
                // Update aria-expanded for accessibility
                var isCollapsed = targetSection.classList.contains('collapsed');
                this.setAttribute('aria-expanded', !isCollapsed);
            }
        });
    });
});
</script>

<style>
  .section-content.collapsed {
    display: none;
  }
  
  .section {
    color: #2563eb;
    text-decoration: none;
    font-weight: bold;
    font-family: 'Times New Roman', serif;
  }
  
  .section:hover {
    color: #1d4ed8;
  }
  
  .module {
    margin-bottom: 1rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
  }
  
  .module caption {
    background-color: #f9fafb;
    padding: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
    font-weight: bold;
  }
  
  .module tbody tr:hover {
    background-color: #f3f4f6;
  }
  
  .addlink {
    color: #10b981;
    font-size: 0.875rem;
    text-decoration: none;
  }
  
  .addlink:hover {
    color: #059669;
  }
</style>

</body>
</html>